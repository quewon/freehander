<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>freehander</title>
    <link rel="stylesheet" href="css/game.css">
    <link rel="stylesheet" href="css/editor.css">
    <script src="js/editor/lib/jszip.min.js" defer></script>
    <script src="js/editor/lib/FileSaver.min.js" defer></script>
</head>
<body>
    <div class="fh-editor">
        <div style="width: 250px; overflow: scroll; border-right: 1px dotted gray; flex-shrink: 0;">
            <div class="fh-slides-container"></div>
        </div>
        <div class="fh-editor-main">
            <div class="fh-toolbar">
                <button type="button" id="fh_add_slide"><b>+</b><br>add slide</button>
                <button type="button" id="fh_play"><b>>></b><br>play</button>
                <div style="flex-grow: 1;"></div>
                <button type="button" id="fh_select_mode" class="selected"><b>^</b><br>select</button>
                <button type="button" id="fh_text_mode"><b>Aa</b><br>text</button>
                <button type="button" id="fh_doodle_mode"><b>/</b><br>doodle</button>
                    <div id="fh_doodle_tooltip" class="fh-inputs hidden">
                        <table border="0">
                            <tr>
                                <td>fill</td>
                                <td><input name="fill_picker" type="color" alpha></td>
                                <td><input name="fill" type="text"></td>
                            </tr>
                            <tr>
                                <td>stroke</td>
                                <td><input name="stroke_picker" type="color" alpha></td>
                                <td><input name="stroke" type="text"></td>
                            </tr>
                            <tr>
                                <td>
                                    stroke width
                                </td>
                                <td colspan="2">
                                    <input name="stroke-width" type="number" min="1">
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3" style="color: gray">click [doodle] to hide this window.</td>
                            </tr>
                        </table>
                    </div>
                <div style="flex-grow: 1;"></div>
                <button type="button" class="inspector_button" id="fh_inspect_element">element</button>
                <button type="button" class="inspector_button" id="fh_inspect_document">game</button>
                <button type="button" class="inspector_button" id="fh_media">media</button>
                <input style="display: none;" type="file" webkitdirectory directory multiple id="fh_media_input">
            </div>
            <div class="fh-editor-aside">
                <div class="fh-game-container">
                    <div class="fh-game"></div>
                    <div class="fh-editor-overlay fh-inputs"></div>
                </div>
                <div class="fh-inspector fh-inputs">
                    <div id="fh_document_inspector" class="hidden">
                        <b>GAME</b><br>
                        <br>
                        <label>title</label><br>
                        <input type="text" name="title" /><br>
                        <br>
                        <label>aspect ratio</label><br>
                        <input type="number" step="0.1" name="aspectratio" /><br>
                        <br>
                        <div style="display: flex; gap: 1.5em;">
                            <button type="button" name="load"><b><</b><br>load</button>
                            <button type="button" name="save"><b>v</b><br>save</button>
                            <button type="button" name="export"><b>[]</b><br>export</button>
                        </div>
                        <input style="display: none;" type="file" accept="text/html" name="html_input">
                        <details style="margin-top: 1em" id="fh_document_fallback_message">
                            <summary style="color: gray">...</summary>
                            <p>the load, save, and export functions are a bit better-integrated on a browser that enables <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showDirectoryPicker#browser_compatibility" target="_blank">direct file access through the File System API</a>.</p>
                        </details>
                    </div>
                    <div id="fh_element_inspector" name="element" class="hidden">
                        <b>ELEMENT</b><br>
                        <br>
                        <label>name</label><br>
                        <input type="text" name="rename" /><br>
                        <br>
                        <label>HTML</label><br>
                        <textarea name="html"></textarea><br>
                        <br>
                        <label>show script</label><br>
                        <textarea name="onshow"></textarea><br>
                        <br>
                        <label>click script</label><br>
                        <textarea name="onclick"></textarea><br>
                        <br>
                    </div>
                    <div id="fh_slide_inspector" class="hidden">
                        <b>SLIDE</b><br>
                        <br>
                        <label>name</label><br>
                        <input type="text" name="rename" /><br>
                        <br>
                        <label>enter script</label><br>
                        <textarea name="onenter"></textarea><br>
                        <br>
                        <label>exit script</label><br>
                        <textarea name="onexit"></textarea><br>
                        <br>
                        <label>CSS</label><br>
                        <textarea name="css"></textarea><br>
                        <br>
                    </div>
                    <div id="fh_media_inspector" class="hidden">
                        <div id="fh_folder_container"></div>
                        <div style="display: flex; gap: 1.5em; border-top: 1px dotted gray; margin-top: 2em; padding-top: 1em;">
                            <button type="button" id="fh_media_reload_button"><b>‚ü≥</b><br>reload</button>
                            <button type="button" id="fh_media_load_button"><b>&#8801;</b><br>load new</button>
                        </div>
                        <details style="margin-top: 1em" id="fh_media_fallback_message">
                            <summary style="color: gray">...</summary>
                            <p>this media folder is nicer to use on a browser that enables <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showDirectoryPicker#browser_compatibility" target="_blank">directory access through the File System API</a>. without it, this website can't remember your last loaded media folder and is a bit slower to re/load the directory.</p>
                        </details>
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="help-menu-button" style="
            position: absolute;
            bottom: 0;
            right: 0;
            font-family: var(--editor-font);
            font-size: 1.2em;
            width: 2em;
            height: 2em;
            margin: 1em;
            border: 1px solid gray;
            border-radius: 50%;
        " onclick="document.getElementById('help-menu').showModal()">?</button>

        <dialog id="help-menu" closedby="any" style="
            max-width: 30em;
            font-family: var(--editor-font);
        ">
            <p>
                <u>about Freehander</u>
            </p>
            <p style="text-align: justify">
                Freehander is a tool for making simple HTML games. You can find out <a href="https://github.com/quewon/freehander/blob/main/README.md" target="_blank">how to use</a> it on the <a href="https://github.com/quewon/freehander" target="_blank">GitHub</a> page, or you can read about <a href="https://quewon.github.io/projects/freehander/" target="_blank">its conception</a> on my personal website.
            </p>
            <p style="text-align: center">
                <button type="button" onclick="document.getElementById('help-menu').close()">close</button>
            </p>
        </dialog>
    </div>
</body>
<script type="module">
    import { EditorGame } from "./js/editor/editor.js";
    new EditorGame();
</script>
</html>